
> @userdashboard/stripe-connect@1.0.22 test /home/benlowry/testing/stripe-connect
> mocha src --recursive --no-colors --retries 0 --timeout 480000 --slow 240000



  server/bind-ip
    BindIP#BEFORE
      ✓ should prioritize ip from header
      ✓ should bind ip from connection remoteAddress
      ✓ should bind ip from connection socket
      ✓ should bind ip from socket remoteAddress

  server/bind-stripekey
    BindStripeKey#AFTER
      ✓ should bind stripekey data to req

  /account/connect/beneficial-owner
    BeneficialOwner#BEFORE
      ✓ should reject invalid ownerid
      ✓ should bind owner to req
    BeneficialOwner#GET
      ✓ should show table for owner

  /account/connect/beneficial-owners
    BeneficialOwners#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject individual registration
      ✓ should bind owners to req
    BeneficialOwners#GET
      ✓ should have row for each owner
      ✓ should display submitted message with removed owners

  /account/connect/company-director
    CompanyDirector#BEFORE
      ✓ should reject invalid directorid
      ✓ should bind director to req
    CompanyDirector#GET
      ✓ should show table for director

  /account/connect/company-directors
    CompanyDirectors#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject individual registration
      ✓ should bind directors to req
    CompanyDirectors#GET
      ✓ should have row for each director
      ✓ should display submitted message with removed directors

  /account/connect/create-beneficial-owner
    CreateBeneficialOwner#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
    CreateBeneficialOwner#GET
      ✓ should present the form
    CreateBeneficialOwner#POST
      ✓ should require each field
      ✓ should require a document id front upload
      ✓ should require a document id back upload
      ✓ should create beneficial owner

  /account/connect/create-company-director
    CreateCompanyDirector#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
    CreateCompanyDirector#GET
      ✓ should present the form
    CreateCompanyDirector#POST
      ✓ should require each field
      ✓ should require a document id front upload
      ✓ should require a document id back upload
      ✓ should create director

  /account/connect/create-registration
    CreateRegistration#GET
      ✓ should present the form
    CreateRegistration#POST
      ✓ should create Stripe account

  /account/connect/delete-beneficial-owner
    DeleteBeneficialOwner#BEFORE
      ✓ should reject invalid ownerid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
      ✓ should bind owner to req
    DeleteBeneficialOwner#GET
      ✓ should present the form
      ✓ should present the owner table
    DeleteBeneficialOwner#POST
      ✓ should delete owner

  /account/connect/delete-company-director
    DeleteCompanyDirector#BEFORE
      ✓ should reject invalid directorid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
      ✓ should bind director to req
    DeleteCompanyDirector#GET
      ✓ should present the form
      ✓ should present the director table
    DeleteCompanyDirector#POST
      ✓ should delete director

  /account/connect/delete-stripe-account
    DeleteStripeAccount#BEFORE
      ✓ should reject invalid stripeid
      ✓ should require own Stripe account
      ✓ should bind Stripe account to req
    DeleteStripeAccount#GET
      ✓ should present the form
      ✓ should present the Stripe account table
    DeleteStripeAccount#POST
      ✓ should delete Stripe account

  /account/connect/edit-beneficial-owner
    EditBeneficialOwner#BEFORE
      ✓ should reject invalid ownerid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
      ✓ should bind owner to req
    EditBeneficialOwner#GET
      ✓ should present the form
    EditBeneficialOwner#POST
      ✓ should require each field
      ✓ should update owner
      ✓ should update document front upload
      ✓ should update document back upload

  /account/connect/edit-company-director
    EditCompanyDirector#BEFORE
      ✓ should reject invalid directorid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
      ✓ should bind director to req
    EditCompanyDirector#GET
      ✓ should present the form
    EditCompanyDirector#POST
      ✓ should require each field
      ✓ should update director
      ✓ should update document front upload
      ✓ should update document back upload

  /account/connect/edit-company-registration
    EditCompanyRegistration#BEFORE
      ✓ should reject invalid registration
      ✓ should reject individual registration
      ✓ should reject invalid personal address country
      ✓ should reject invalid company address country
      ✓ should bind application CountrySpec to req
      ✓ should bind personal address country to req
      ✓ should bind posted personal address country to req
      ✓ should bind company address country to req
      ✓ should bind posted company address country to req
    EditCompanyRegistration#GET
      ✓ should present the form
      ✓ should have AT-required fields
      ✓ should have AU-required fields
      ✓ should have BE-required fields
      ✓ should have CA-required fields
      ✓ should have CH-required fields
      ✓ should have DE-required fields
      ✓ should have DK-required fields
      ✓ should have ES-required fields
      ✓ should have FI-required fields
      ✓ should have FR-required fields
      ✓ should have GB-required fields
      ✓ should have HK-required fields
      ✓ should have IE-required fields
      ✓ should have IT-required fields
      ✓ should have JP-required fields
      ✓ should have LU-required fields
      ✓ should have NL-required fields
      ✓ should have NO-required fields
      ✓ should have NZ-required fields
      ✓ should have PT-required fields
      ✓ should have SE-required fields
      ✓ should have SG-required fields
      ✓ should have US-required fields
    EditCompanyRegistration#POST
      ✓ should refresh and load states for posted company address
      ✓ should reject AT invalid fields (164187ms)
      ✓ should update AT information
      ✓ should reject AU invalid fields (175779ms)
      ✓ should update AU information
      ✓ should reject BE invalid fields (165697ms)
      ✓ should update BE information
      ✓ should reject CA invalid fields (176045ms)
      ✓ should update CA information
      ✓ should reject CH invalid fields (165574ms)
      ✓ should update CH information
      ✓ should reject DE invalid fields (165598ms)
      ✓ should update DE information
      ✓ should reject DK invalid fields (165632ms)
      ✓ should update DK information
      ✓ should reject ES invalid fields (168078ms)
      ✓ should update ES information
      ✓ should reject FI invalid fields (165260ms)
      ✓ should update FI information
      ✓ should reject FR invalid fields (171495ms)
      ✓ should update FR information
      ✓ should reject GB invalid fields (176737ms)
      ✓ should update GB information
      ✓ should reject HK invalid fields (154386ms)
      ✓ should update HK information
      ✓ should reject IE invalid fields (167731ms)
      ✓ should update IE information
      ✓ should reject IT invalid fields (172191ms)
      ✓ should update IT information
      ✓ should reject JP invalid fields (420913ms)
      ✓ should update JP information
      ✓ should reject LU invalid fields (166485ms)
      ✓ should update LU information
      ✓ should reject NL invalid fields (166610ms)
      ✓ should update NL information
      ✓ should reject NO invalid fields (167714ms)
      ✓ should update NO information
      ✓ should reject NZ invalid fields (167227ms)
      ✓ should update NZ information
      ✓ should reject PT invalid fields (170542ms)
      ✓ should update PT information
      ✓ should reject SE invalid fields (168624ms)
      ✓ should update SE information
      ✓ should reject SG invalid fields (155629ms)
      ✓ should update SG information
      ✓ should reject US invalid fields (236564ms)
      ✓ should update US information

  /account/connect/edit-individual-registration
    EditIndividualRegistration#BEFORE
      ✓ should reject invalid registration
      ✓ should reject company registration
      ✓ should bind application CountrySpec to req
      ✓ should bind address country to req
    EditIndividualRegistration#GET
      ✓ should present the form
      ✓ should have AT-required fields
      ✓ should have AU-required fields
      ✓ should have BE-required fields
      ✓ should have CA-required fields
      ✓ should have CH-required fields
      ✓ should have DE-required fields
      ✓ should have DK-required fields
      ✓ should have ES-required fields
      ✓ should have FI-required fields
      ✓ should have FR-required fields
      ✓ should have GB-required fields
      ✓ should have HK-required fields
      ✓ should have IE-required fields
      ✓ should have IT-required fields
      ✓ should have JP-required fields
      ✓ should have LU-required fields
      ✓ should have NL-required fields
      ✓ should have NO-required fields
      ✓ should have NZ-required fields
      ✓ should have PT-required fields
      ✓ should have SE-required fields
      ✓ should have SG-required fields
      ✓ should have US-required fields
    EditIndividualRegistration#POST
      ✓ should reject AT invalid fields
      ✓ should update AT information
      ✓ should reject AU invalid fields
      ✓ should update AU information
      ✓ should reject BE invalid fields
      ✓ should update BE information
      ✓ should reject CA invalid fields
      ✓ should update CA information
      ✓ should reject CH invalid fields
      ✓ should update CH information
      ✓ should reject DE invalid fields
      ✓ should update DE information
      ✓ should reject DK invalid fields
      ✓ should update DK information
      ✓ should reject ES invalid fields
      ✓ should update ES information
      ✓ should reject FI invalid fields
      ✓ should update FI information
      ✓ should reject FR invalid fields
      ✓ should update FR information
      ✓ should reject GB invalid fields
      ✓ should update GB information
      ✓ should reject HK invalid fields
      ✓ should update HK information
      ✓ should reject IE invalid fields
      ✓ should update IE information
      ✓ should reject IT invalid fields
      ✓ should update IT information
      ✓ should reject JP invalid fields (191314ms)
      ✓ should update JP information
      ✓ should reject LU invalid fields
      ✓ should update LU information
      ✓ should reject NL invalid fields
      ✓ should update NL information
      ✓ should reject NO invalid fields
      ✓ should update NO information
      ✓ should reject NZ invalid fields
      ✓ should update NZ information
      ✓ should reject PT invalid fields
      ✓ should update PT information
      ✓ should reject SE invalid fields
      ✓ should update SE information
      ✓ should reject SG invalid fields
      ✓ should update SG information
      ✓ should reject US invalid fields (146551ms)
      ✓ should update US information

  /account/connect/edit-payment-information
    EditPaymentInformation#BEFORE
      ✓ should reject invalid stripeid
      ✓ should bind Stripe account to req
    EditPaymentInformation#GET
      ✓ should present the form
    EditPaymentInformation#POST
      ✓ should reject AT invalid fields
      ✓ should submit AT information
      ✓ should reject AU invalid fields
      ✓ should update AU information
      ✓ should reject BE invalid fields
      ✓ should update BE information
      ✓ should reject CA invalid fields
      ✓ should update CA information
      ✓ should reject CH invalid fields
      ✓ should update CH information
      ✓ should reject DE invalid fields
      ✓ should update DE information
      ✓ should reject DK invalid fields
      ✓ should update DK information
      ✓ should reject ES invalid fields
      ✓ should update ES information
      ✓ should reject FI invalid fields
      ✓ should update FI information
      ✓ should reject GB invalid fields (account number, sort code)
      ✓ should update GB information (account number, sort code)
      ✓ should reject GB invalid fields (iban)
      ✓ should update GB information (iban)
      ✓ should reject HK invalid fields
      ✓ should update HK information
      ✓ should reject IE invalid fields
      ✓ should update IE information
      ✓ should reject IT invalid fields
      ✓ should update IT information
      ✓ should reject JP invalid fields
      ✓ should update JP information
      ✓ should reject LU invalid fields
      ✓ should update LU information
      ✓ should reject NL invalid fields
      ✓ should update NL information
      ✓ should reject NO invalid fields
      ✓ should update NO information
      ✓ should reject NZ invalid fields
      ✓ should update NZ information
      ✓ should reject PT invalid fields
      ✓ should update PT information
      ✓ should reject SE invalid fields
      ✓ should update SE information
      ✓ should reject SG invalid fields
      ✓ should update SG information
      ✓ should reject US invalid fields
      ✓ should update US information

  /account/connect
    Index#BEFORE
      ✓ should bind Stripe accounts to req
    Index#GET
      ✓ should have row for each Stripe account

  /account/connect/stripe-account
    StripeAccount#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject other account's stripeid
      ✓ should bind Stripe account to req
    StripeAccount#GET
      ✓ should show registration unstarted
      ✓ should show registration completed
      ✓ should hide registration after submitting registration
      ✓ should hide company owners after submitting registration
      ✓ should show payment information required
      ✓ should show payment information created
      ✓ should show ready to submit
      ✓ should show registration is submitted

  /account/connect/stripe-accounts
    StripeAccounts#BEFORE
      ✓ should bind Stripe accounts to req
    StripeAccounts#GET
      ✓ should have row for each Stripe account

  /account/connect/submit-company-registration
    SubmitCompanyRegistration#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject individual registration
      ✓ should bind Stripe account to req
    SubmitCompanyRegistration#GET
      ✓ should present the form
      ✓ should reject registration that hasn't submitted payment details
    SubmitCompanyRegistration#POST
      ✓ should submit registration

  /account/connect/submit-individual-registration
    SubmitIndividualRegistration#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject company registration
      ✓ should bind Stripe account to req
    SubmitIndividualRegistration#GET
      ✓ should present the form
      ✓ should reject registration that hasn't submitted payment details
    SubmitIndividualRegistration#POST
      ✓ should submit registration

  /administrator/connect/delete-stripe-account
    DeleteStripeAccount#BEFORE
      ✓ should bind Stripe account to req
    DeleteStripeAccount#GET
      ✓ should present the form
      ✓ should present the Stripe account table
    DeleteStripeAccount#POST
      ✓ should delete Stripe account

  /administrator/connect
    Index#BEFORE
      ✓ should bind Stripe accounts to req
    Index#GET
      ✓ should have row for each Stripe account

  /administrator/connect/payout
    Payout#BEFORE
      ✓ should reject invalid payoutid
      ✓ should bind payout to req
    Payout#GET
      ✓ should have row for payout

  /administrator/connect/payouts
    Payouts#BEFORE
      ✓ should bind payouts to req
    Payouts#GET
      ✓ should have row for each payout

  /administrator/connect/reject-stripe-account
    RejectStripeAccount#BEFORE
      ✓ should bind Stripe account to req
    RejectStripeAccount#GET
      ✓ should present the form
      ✓ should present the Stripe account table
    RejectStripeAccount#POST
      ✓ should update the Stripe account as rejected

  /administrator/connect/stripe-account
    StripeAccount#BEFORE
      ✓ should reject invalid stripeid
      ✓ should bind Stripe account to req
    StripeAccount#GET
      ✓ should have row for Stripe account

  /administrator/connect/stripe-accounts
    StripeAccounts#BEFORE
      ✓ should bind Stripe accounts to req
    StripeAccounts#GET
      ✓ should have row for each Stripe account

  /api/administrator/connect/account-stripe-accounts-count
    returns
      ✓ integer

  /api/administrator/connect/account-stripe-accounts
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ missing querystring accountid
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring limit (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    configuration
      ✓ environment PAGE_SIZE

  /api/administrator/connect/delete-stripe-account
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      returns
        ✓ boolean

  /api/administrator/connect/payout
    exceptions
      invalid-payoputid
        ✓ missing querystring payoutid
        ✓ invalid querystring payoutid
    returns
      ✓ object

  /api/administrator/connect/payouts-count
    returns
      ✓ integer

  /api/administrator/connect/payouts
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring limit (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    configuration
      ✓ environment PAGE_SIZE

  /api/administrator/connect/set-stripe-account-rejected
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-reason
        ✓ missing posted reason
        ✓ invalid posted reason
    returns
      ✓ boolean

  /api/administrator/connect/stripe-account-payouts-count
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
    returns
      ✓ integer

  /api/administrator/connect/stripe-account-payouts
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
    returns
      ✓ array

  /api/administrator/connect/stripe-account
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
    returns
      ✓ object

  /api/administrator/connect/stripe-accounts-count
    returns
      ✓ integer

  /api/administrator/connect/stripe-accounts
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring limit (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    configuration
      ✓ environment PAGE_SIZE

  /api/user/connect/beneficial-owner
    exceptions
      invalid-ownerid
        ✓ missing querystring ownerid
        ✓ invalid querystring ownerid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ object

  /api/user/connect/beneficial-owners-count
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-account
        ✓ ineligible accessing account
      invalid-stripe-account
        ✓ ineligible stripe account for individual
    returns
      ✓ integer

  /api/user/connect/beneficial-owners
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-account
        ✓ ineligible accessing account
      invalid-stripe-account
        ✓ ineligible stripe account for individual
    returns
      ✓ array

  /api/user/connect/company-director
    exceptions
      invalid-directorid
        ✓ missing querystring directorid
        ✓ invalid querystring directorid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ object

  /api/user/connect/company-directors-count
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-account
        ✓ ineligible accessing account
      invalid-stripe-account
        ✓ ineligible stripe account for individual
    returns
      ✓ integer

  /api/user/connect/company-directors
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-account
        ✓ ineligible accessing account
      invalid-stripe-account
        ✓ ineligible stripe account for individual
    returns
      ✓ array

  /api/user/connect/country-spec
    exceptions
      ✓ missing querystring country
      ✓ invalid querystring country
    returns
      ✓ object

  /api/user/connect/country-specs-count
    returns
      ✓ integer

  /api/user/connect/country-specs
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring limit (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    configuration
      ✓ environment PAGE_SIZE

  /api/user/connect/create-beneficial-owner
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-account
        ✓ ineligible accessing account
      invalid-stripe-account
        ✓ ineligible stripe account for individual
      invalid-relationship_owner_first_name
        ✓ missing posted relationship_owner_first_name
      invalid-relationship_owner_last_name
        ✓ missing posted relationship_owner_last_name
      invalid-relationship_owner_address_city
        ✓ missing posted relationship_owner_address_city
      invalid-relationship_owner_address_line1
        ✓ missing posted relationship_owner_address_line1
      invalid-relationship_owner_address_postal_code
        ✓ missing posted relationship_owner_address_postal_code
      invalid-relationship_owner_dob_day
        ✓ missing posted relationship_owner_dob_day
      invalid-relationship_owner_dob_month
        ✓ missing posted relationship_owner_dob_month
      invalid-relationship_owner_dob_year
        ✓ missing posted relationship_owner_dob_year
    returns
      ✓ object

  /api/user/connect/create-company-director
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-account
        ✓ ineligible accessing account
      invalid-stripe-account
        ✓ ineligible stripe account for individual
      invalid-relationship_director_first_name
        ✓ missing posted relationship_director_first_name
      invalid-relationship_director_last_name
        ✓ missing posted relationship_director_last_name
    returns
      ✓ object

  /api/user/connect/create-stripe-account
    exceptions
      invalid-accountid
        ✓ missing querystring accountid
        ✓ invalid querystring accountid
      invalid-account
        ✓ ineligible accessing account
      invalid-type
        ✓ missing posted type
        ✓ invalid posted type
      invalid-country
        ✓ invalid posted country
        ✓ invalid posted country
    returns
      ✓ object

  /api/user/connect/delete-beneficial-owner
    exceptions
      invalid-ownerid
        ✓ missing querystring ownerid
        ✓ invalid querystring ownerid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ boolean

  /api/user/connect/delete-company-director
    exceptions
      invalid-directorid
        ✓ missing querystring directorid
        ✓ invalid querystring directorid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ boolean

  /api/user/connect/delete-stripe-account
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ boolean

  /api/user/connect/payout
    exceptions
      invalid-payoutid
        ✓ missing querystring payoutid
        ✓ invalid querystring payoutid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ array

  /api/user/connect/payouts-count
    exceptions
      invalid-payoutid
        ✓ missing querystring payoutid
        ✓ invalid querystring payoutid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ integer

  /api/user/connect/payouts
    exceptions
      invalid-payoutid
        ✓ missing querystring payoutid
        ✓ invalid querystring payoutid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ array

  /api/user/connect/set-company-registration-submitted
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-stripe-account
        ✓ ineligible stripe account for individual
        ✓ ineligible stripe account is submitted
      invalid-account
        ✓ ineligible accessing account
      invalid-payment-details
        ✓ ineligible registration missing payment details
    returns
      ✓ object for AT registration
      ✓ object for AU registration
      ✓ object for BE registration
      ✓ object for CA registration
      ✓ object for CH registration
      ✓ object for DE registration
      ✓ object for DK registration
      ✓ object for ES registration
      ✓ object for FI registration
      ✓ object for FR registration
      ✓ object for GB registration
      ✓ object for HK registration
      ✓ object for IE registration
      ✓ object for IT registration
      ✓ object for JP registration
      ✓ object for LU registration
      ✓ object for NL registration
      ✓ object for NO registration
      ✓ object for NZ registration
      ✓ object for PT registration
      ✓ object for SE registration
      ✓ object for SG registration
      ✓ object for US registration

  /api/user/connect/set-individual-registration-submitted
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-stripe-account
        ✓ ineligible stripe account for companies
        ✓ ineligible stripe account is submitted
      invalid-account
        ✓ ineligible accessing account
      invalid-payment-details
        ✓ ineligible registration missing payment details
    returns
      ✓ returns object for AT registration
      ✓ returns object for AU registration
      ✓ returns object for BE registration
      ✓ returns object for CA registration
      ✓ returns object for CH registration
      ✓ returns object for DE registration
      ✓ returns object for DK registration
      ✓ returns object for ES registration
      ✓ returns object for FI registration
      ✓ returns object for FR registration
      ✓ returns object for GB registration
      ✓ returns object for HK registration
      ✓ returns object for IE registration
      ✓ returns object for IT registration
      ✓ returns object for JP registration
      ✓ returns object for LU registration
      ✓ returns object for NL registration
      ✓ returns object for NO registration
      ✓ returns object for NZ registration
      ✓ returns object for PT registration
      ✓ returns object for SE registration
      ✓ returns object for SG registration
      ✓ returns object for US registration

  /api/user/connect/stripe-account-payouts-count
    exceptions
      invalid-payoutid
        ✓ missing querystring payoutid
        ✓ invalid querystring payoutid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ integer

  /api/user/connect/stripe-account-payouts
    exceptions
      invalid-payoutid
        ✓ missing querystring payoutid
        ✓ invalid querystring payoutid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ array

  /api/user/connect/stripe-account
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ object

  /api/user/connect/stripe-accounts-count
    exceptions
      invalid-payoutid
        ✓ missing querystring payoutid
        ✓ invalid querystring payoutid
      invalid-account
        ✓ ineligible accessing account
    returns
      ✓ integer

  /api/user/connect/stripe-accounts
    exceptions
      invalid-payoutid
        ✓ missing querystring payoutid
        ✓ invalid querystring payoutid
      invalid-account
        ✓ ineligible accessing account
    receives
      ✓ optional querystring offset (integer)
      ✓ optional querystring limit (integer)
      ✓ optional querystring all (boolean)
    returns
      ✓ array
    configuration
      ✓ environment PAGE_SIZE

  /api/user/connect/update-beneficial-owner
    exceptions
      invalid-ownerid
        ✓ missing querystring ownerid
        ✓ invalid querystring ownerid
      invalid-account
        ✓ ineligible accessing account
      invalid-relationship_owner_first_name
        ✓ missing posted relationship_owner_first_name
      invalid-relationship_owner_last_name
        ✓ missing posted relationship_owner_last_name
      invalid-relationship_owner_address_country
        ✓ missing posted relationship_owner_address_country
      invalid-relationship_owner_address_city
        ✓ missing posted relationship_owner_address_city
      invalid-relationship_owner_address_postal_code
        ✓ missing posted relationship_owner_address_postal_code
      invalid-relationship_owner_address_line1
        ✓ missing posted relationship_owner_address_line1
      invalid-relationship_owner_dob_day
        ✓ missing posted relationship_owner_dob_day
      invalid-relationship_owner_dob_month
        ✓ missing posted relationship_owner_dob_month
      invalid-relationship_owner_dob_year
        ✓ missing posted relationship_owner_dob_year
    returns
      ✓ object

  /api/user/connect/update-company-director
    exceptions
      invalid-directorid
        ✓ missing querystring directorid
        ✓ invalid querystring directorid
      invalid-account
        ✓ ineligible accessing account
      invalid-relationship_director_first_name
        ✓ missing posted relationship_director_first_name
      invalid-relationship_director_last_name
        ✓ missing posted relationship_director_last_name
    returns
      ✓ object

  /api/user/connect/update-company-registration
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-stripe-account
        ✓ ineligible stripe account for individuals
        ✓ ineligible stripe account is submitted
      invalid-account
        ✓ ineligible accessing account
      invalid-company_address_line1
        ✓ missing posted company_address_line1
      invalid-company_address_postal_code
        ✓ missing posted company_address_postal_code
      invalid-company_name
        ✓ missing posted company_name
      invalid-company_tax_id
        ✓ missing posted company_tax_id
      invalid-company_address_city
        ✓ missing posted company_address_line1
      invalid-company_address_state
        ✓ missing posted company_address_state
      invalid-business_profile_mcc
        ✓ missing posted business_profile_mcc
      invalid-business_profile_url
        ✓ missing posted business_profile_url
      invalid-relationship_representative_dob_day
        ✓ missing posted relationship_representative_dob_day
      invalid-relationship_representative_dob_month
        ✓ missing posted relationship_representative_dob_month
      invalid-relationship_representative_dob_year
        ✓ missing posted relationship_representative_dob_year
      invalid-relationship_representative_first_name
        ✓ missing posted relationship_representative_first_name
      invalid-relationship_representative_last_name
        ✓ missing posted relationship_representative_last_name
      invalid-relationship_representative_email
        ✓ missing posted relationship_representative_email
      invalid-relationship_representative_phone
        ✓ missing posted relationship_representative_phone
      invalid-relationship_representative_ssn_last_4
        ✓ missing posted relationship_representative_ssn_last_4
      invalid-company_name_kana
        ✓ missing posted company_name_kana
      invalid-company_name_kanji
        ✓ missing posted company_name_kanji
      invalid-company_address_kana_postal_code
        ✓ missing posted company_address_kana_postal_code
      invalid-company_address_kana_city
        ✓ missing posted company_address_kana_city
      invalid-company_address_kana_state
        ✓ missing posted company_address_kana_state
      invalid-company_address_kana_town
        ✓ missing posted company_address_kana_town
      invalid-company_address_kana_line1
        ✓ missing posted company_address_kana_line1
      invalid-company_address_kanji_postal_code
        ✓ missing posted company_address_kanji_postal_code
      invalid-company_address_kanji_city
        ✓ missing posted company_address_kanji_city
      invalid-company_address_kanji_state
        ✓ missing posted company_address_kanji_state
      invalid-company_address_kanji_town
        ✓ missing posted company_address_kanji_town
      invalid-company_address_kanji_line1
        ✓ missing posted company_address_kanji_line1
      invalid-relationship_representative_address_kana_postal_code
        ✓ missing posted relationship_representative_address_kana_postal_code
      invalid-relationship_representative_address_kana_city
        ✓ missing posted relationship_representative_address_kana_city
      invalid-relationship_representative_address_kana_state
        ✓ missing posted relationship_representative_address_kana_state
      invalid-relationship_representative_address_kana_town
        ✓ missing posted relationship_representative_address_kana_town
      invalid-relationship_representative_address_kana_line1
        ✓ missing posted relationship_representative_address_kana_line1
      invalid-relationship_representative_address_kanji_postal_code
        ✓ missing posted relationship_representative_address_kanji_postal_code
      invalid-relationship_representative_address_kanji_city
        ✓ missing posted relationship_representative_address_kanji_city
      invalid-relationship_representative_address_kanji_state
        ✓ missing posted relationship_representative_address_kanji_state
      invalid-relationship_representative_address_kanji_town
        ✓ missing posted relationship_representative_address_kanji_town
      invalid-relationship_representative_address_kanji_line1
        ✓ missing posted relationship_representative_address_kanji_line1
    returns
      ✓ object for AT registration
      ✓ object for AU registration
      ✓ object for BE registration
      ✓ object for CA registration
      ✓ object for CH registration
      ✓ object for DE registration
      ✓ object for DK registration
      ✓ object for ES registration
      ✓ object for FI registration
      ✓ object for FR registration
      ✓ object for GB registration
      ✓ object for HK registration
      ✓ object for IE registration
      ✓ object for IT registration
      ✓ object for JP registration
      ✓ object for LU registration
      ✓ object for NL registration
      ✓ object for NO registration
      ✓ object for NZ registration
      ✓ object for PT registration
      ✓ object for SE registration
      ✓ object for SG registration
      ✓ object for US registration

  /api/user/connect/update-individual-registration
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-stripe-account
        ✓ ineligible stripe account for company
        ✓ ineligible stripe account is submitted
      invalid-account
        ✓ ineligible accessing account
      invalid-individual_dob_day
        ✓ missing posted individual_dob_day
      invalid-individual_dob_month
        ✓ missing posted individual_dob_month
      invalid-individual_dob_year
        ✓ missing posted individual_dob_year
      invalid-individual_first_name
        ✓ missing posted individual_first_name
      invalid-individual_last_name
        ✓ missing posted individual_last_name
      invalid-individual_address_city
        ✓ missing posted individual_address_city
      invalid-individual_address_state
        ✓ missing posted individual_address_state
      invalid-individual_address_postal_code
        ✓ missing posted individual_address_postal_code
      invalid-business_profile_mcc
        ✓ missing posted business_profile_mcc
      invalid-business_profile_url
        ✓ missing posted business_profile_url
      invalid-individual_ssn_last_4
        ✓ missing posted individual_ssn_last_4
      invalid-individual_phone
        ✓ missing posted individual_phone
      invalid-individual_email
        ✓ missing posted 
      invalid-individual_gender
        ✓ missing posted individual_gender
        ✓ invalid posted individual_gender
      invalid-individual_first_name_kana
        ✓ missing posted individual_first_name_kana
      invalid-individual_last_name_kana
        ✓ missing posted individual_last_name_kana
      invalid-individual_first_name_kanji
        ✓ missing posted individual_first_name_kanji
      invalid-individual_last_name_kanji
        ✓ missing posted individual_last_name_kanji
      invalid-individual_address_kana_postal_code
        ✓ missing posted individual_address_kana_postal_code
      invalid-individual_address_kana_state
        ✓ missing posted individual_address_kana_state
      invalid-individual_address_kana_city
        ✓ missing posted individual_address_kana_city
      invalid-individual_address_kana_town
        ✓ missing posted individual_address_kana_town
      invalid-individual_address_kana_line1
        ✓ missing posted individual_address_kana_line1
      invalid-individual_address_kanji_postal_code
        ✓ missing posted individual_address_kanji_postal_code
      invalid-individual_address_kanji_state
        ✓ missing posted individual_address_kanji_state
      invalid-individual_address_kanji_city
        ✓ missing posted individual_address_kanji_city
      invalid-individual_address_kanji_town
        ✓ missing posted individual_address_kanji_town
      invalid-individual_address_kanji_line1
        ✓ missing posted individual_address_kanji_line1
    returns
      ✓ returns object for AT registration
      ✓ returns object for AU registration
      ✓ returns object for BE registration
      ✓ returns object for CA registration
      ✓ returns object for CH registration
      ✓ returns object for DE registration
      ✓ returns object for DK registration
      ✓ returns object for ES registration
      ✓ returns object for FI registration
      ✓ returns object for FR registration
      ✓ returns object for GB registration
      ✓ returns object for HK registration
      ✓ returns object for IE registration
      ✓ returns object for IT registration
      ✓ returns object for JP registration
      ✓ returns object for LU registration
      ✓ returns object for NL registration
      ✓ returns object for NO registration
      ✓ returns object for NZ registration
      ✓ returns object for PT registration
      ✓ returns object for SE registration
      ✓ returns object for SG registration
      ✓ returns object for US registration

  /api/user/connect/update-payment-information
    exceptions
      invalid-stripeid
        ✓ missing querystring stripeid
        ✓ invalid querystring stripeid
      invalid-account
        ✓ ineligible accessing account
      invalid-currency
        ✓ missing posted currency
      invalid-country
        ✓ missing posted country
      invalid-account_holder_name
        ✓ missing posted account_holder_name
      invalid-account_type
        ✓ missing posted account_type
      invalid-iban
        ✓ missing posted iban
      invalid-bsb_number
        ✓ missing posted bsb_number
      invalid-account_number
        ✓ missing posted account_number
      invalid-institution_number
        ✓ missing posted institution_number
      invalid-transit_number
        ✓ missing posted transit_number
      invalid-sort_code
        ✓ missing posted sort_code
      invalid-clearing_code
        ✓ missing posted clearing_code
      invalid-branch_code
        ✓ missing posted branch_code
      invalid-bank_code
        ✓ missing posted bank_code
      invalid-routing_number
        ✓ missing posted routing_number
    returns
      ✓ object for AT registration
    returns
      ✓ object for AU registration
      ✓ object for BE registration
      ✓ object for CA registration
      ✓ object for CH registration
      ✓ object for DE registration
      ✓ object for DK registration
      ✓ object for ES registration
      ✓ object for FI registration
      ✓ object for FR registration
      ✓ object for GB registration (account number, sort code)
      ✓ object for GB registration (iban)
      ✓ object for HK registration
      ✓ object for IE registration
      ✓ object for IT registration
      ✓ object for JP registration
      ✓ object for LU registration
      ✓ object for NL registration
      ✓ object for NO registration
      ✓ object for NZ registration
      ✓ object for PT registration
      ✓ object for SE registration
      ✓ object for SG registration
      ✓ object for US registration


  722 passing (5h)

