
> @userdashboard/stripe-connect@1.0.8 test /home/benlowry/SynologyDrive/workspaces/dashboard/stripe-connect
> NODE_ENV=testing mocha src --recursive --timeout 240000 --slow 240000



  server/bind-stripekey
    BindStripeKey#AFTER
      ✓ should bind stripekey data to req

  /account/connect/beneficial-owner
    BeneficialOwner#BEFORE
      ✓ should reject invalid ownerid
      ✓ should bind owner to req
    BeneficialOwner#GET
      ✓ should show table for owner

  /account/connect/beneficial-owners
    BeneficialOwners#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject individual registration
      ✓ should bind owners to req
    BeneficialOwners#GET
      ✓ should have row for each owner
      ✓ should display submitted message with removed owners

  /account/connect/company-director
    CompanyDirector#BEFORE
      ✓ should reject invalid directorid
      ✓ should bind director to req
    CompanyDirector#GET
      ✓ should show table for director

  /account/connect/company-directors
    CompanyDirectors#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject individual registration
      ✓ should bind directors to req
    CompanyDirectors#GET
      ✓ should have row for each director
      ✓ should display submitted message with removed directors

  /account/connect/create-beneficial-owner
    CreateBeneficialOwner#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
    CreateBeneficialOwner#GET
      ✓ should present the form
    CreateBeneficialOwner#POST
      ✓ should require each field
      ✓ should require a document id front upload
      ✓ should require a document id back upload
      ✓ should create owner

  /account/connect/create-company-director
    CreateCompanyDirector#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
    CreateCompanyDirector#GET
      ✓ should present the form
    CreateCompanyDirector#POST
      ✓ should require each field
      ✓ should require a document id front upload
      ✓ should require a document id back upload
      ✓ should create director

  /account/connect/create-registration
    CreateRegistration#GET
      ✓ should present the form
    CreateRegistration#POST
      ✓ should create Stripe account

  /account/connect/delete-company-director
    DeleteCompanyDirector#BEFORE
      ✓ should reject invalid directorid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
      ✓ should bind director to req
    DeleteCompanyDirector#GET
      ✓ should present the form
      ✓ should present the director table
    DeleteCompanyDirector#POST
      ✓ should delete director

  /account/connect/delete-company-owner
    DeleteBeneficialOwner#BEFORE
      ✓ should reject invalid ownerid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
      ✓ should bind owner to req
    DeleteBeneficialOwner#GET
      ✓ should present the form
      ✓ should present the owner table
    DeleteBeneficialOwner#POST
      ✓ should delete owner

  /account/connect/delete-stripe-account
    DeleteStripeAccount#BEFORE
      ✓ should reject invalid stripeid
      ✓ should require own Stripe account
      ✓ should bind Stripe account to req
    DeleteStripeAccount#GET
      ✓ should present the form
      ✓ should present the Stripe account table
    DeleteStripeAccount#POST
      ✓ should delete Stripe account

  /account/connect/edit-beneficial-owner
    EditBeneficialOwner#BEFORE
      ✓ should reject invalid ownerid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
      ✓ should bind owner to req
    EditBeneficialOwner#GET
      ✓ should present the form
    EditBeneficialOwner#POST
      ✓ should require each field
      ✓ should update owner
      1) should update document front upload
      ✓ should update document back upload

  /account/connect/edit-company-director
    EditCompanyDirector#BEFORE
      ✓ should reject invalid directorid
      ✓ should reject submitted registration
      ✓ should require own Stripe account
      ✓ should bind director to req
    EditCompanyDirector#GET
      ✓ should present the form
    EditCompanyDirector#POST
      ✓ should require each field
      ✓ should update director
      ✓ should update document front upload
      ✓ should update document back upload

  /account/connect/edit-company-registration
    EditCompanyRegistration#BEFORE
      ✓ should reject invalid registration
      ✓ should reject individual registration
      ✓ should reject invalid personal address country
      ✓ should reject invalid company address country
      ✓ should bind application CountrySpec to req
      ✓ should bind personal address country to req
      ✓ should bind posted personal address country to req
      ✓ should bind company address country to req
      ✓ should bind posted company address country to req
    EditCompanyRegistration#GET
      ✓ should present the form
      ✓ should have AT-required fields
      ✓ should have AU-required fields
      ✓ should have BE-required fields
      ✓ should have CA-required fields
      ✓ should have CH-required fields
      ✓ should have DE-required fields
      ✓ should have DK-required fields
      ✓ should have ES-required fields
      ✓ should have FI-required fields
      ✓ should have FR-required fields
      ✓ should have GB-required fields
      ✓ should have HK-required fields
      ✓ should have IE-required fields
      ✓ should have IT-required fields
      ✓ should have JP-required fields
      ✓ should have LU-required fields
      ✓ should have NL-required fields
      ✓ should have NO-required fields
      ✓ should have NZ-required fields
      ✓ should have PT-required fields
      ✓ should have SE-required fields
      ✓ should have SG-required fields
      ✓ should have US-required fields
    EditCompanyRegistration#POST
      ✓ should refresh and load states for posted company address
      ✓ should reject AT invalid fields
      ✓ should update AT information
      ✓ should reject AU invalid fields
      ✓ should update AU information
      ✓ should reject BE invalid fields
      ✓ should update BE information
      ✓ should reject CA invalid fields
      ✓ should update CA information
      ✓ should reject CH invalid fields
      ✓ should update CH information
      ✓ should reject DE invalid fields
      ✓ should update DE information
      ✓ should reject DK invalid fields
      ✓ should update DK information
      ✓ should reject ES invalid fields
      ✓ should update ES information
      ✓ should reject FI invalid fields
      ✓ should update FI information
      ✓ should reject FR invalid fields
      ✓ should update FR information
      ✓ should reject GB invalid fields
      ✓ should update GB information
      ✓ should reject HK invalid fields
      ✓ should update HK information
      ✓ should reject IE invalid fields
      ✓ should update IE information
      ✓ should reject IT invalid fields
      ✓ should update IT information
      ✓ should reject JP invalid fields
      ✓ should update JP information
      ✓ should reject LU invalid fields
      ✓ should update LU information
      ✓ should reject NL invalid fields
      ✓ should update NL information
      ✓ should reject NO invalid fields
      ✓ should update NO information
      ✓ should reject NZ invalid fields
      ✓ should update NZ information
      ✓ should reject PT invalid fields
      ✓ should update PT information
      ✓ should reject SE invalid fields
      ✓ should update SE information
      ✓ should reject SG invalid fields
      ✓ should update SG information
      ✓ should reject US invalid fields
      ✓ should update US information

  /account/connect/edit-individual-registration
    EditIndividualRegistration#BEFORE
      ✓ should reject invalid registration
      ✓ should reject company registration
      ✓ should bind application CountrySpec to req
      ✓ should bind address country to req
    EditIndividualRegistration#GET
      ✓ should present the form
      ✓ should have AT-required fields
      ✓ should have AU-required fields
      ✓ should have BE-required fields
      ✓ should have CA-required fields
      ✓ should have CH-required fields
      ✓ should have DE-required fields
      ✓ should have DK-required fields
      ✓ should have ES-required fields
      ✓ should have FI-required fields
      ✓ should have FR-required fields
      ✓ should have GB-required fields
      ✓ should have HK-required fields
      ✓ should have IE-required fields
      ✓ should have IT-required fields
      ✓ should have JP-required fields
      ✓ should have LU-required fields
      ✓ should have NL-required fields
      ✓ should have NO-required fields
      ✓ should have NZ-required fields
      ✓ should have PT-required fields
      ✓ should have SE-required fields
      ✓ should have SG-required fields
      ✓ should have US-required fields
    EditIndividualRegistration#POST
      ✓ should reject AT invalid fields
      ✓ should update AT information
      ✓ should reject AU invalid fields
      ✓ should update AU information
      ✓ should reject BE invalid fields
      ✓ should update BE information
      ✓ should reject CA invalid fields
      ✓ should update CA information
      ✓ should reject CH invalid fields
      ✓ should update CH information
      ✓ should reject DE invalid fields
      ✓ should update DE information
      ✓ should reject DK invalid fields
      ✓ should update DK information
      ✓ should reject ES invalid fields
      ✓ should update ES information
      ✓ should reject FI invalid fields
      ✓ should update FI information
      ✓ should reject FR invalid fields
      ✓ should update FR information
      ✓ should reject GB invalid fields
      ✓ should update GB information
      ✓ should reject HK invalid fields
      ✓ should update HK information
      ✓ should reject IE invalid fields
      ✓ should update IE information
      ✓ should reject IT invalid fields
      ✓ should update IT information
      ✓ should reject JP invalid fields
      ✓ should update JP information
      ✓ should reject LU invalid fields
      ✓ should update LU information
      ✓ should reject NL invalid fields
      ✓ should update NL information
      ✓ should reject NO invalid fields
      ✓ should update NO information
      ✓ should reject NZ invalid fields
      ✓ should update NZ information
      ✓ should reject PT invalid fields
      ✓ should update PT information
      ✓ should reject SE invalid fields
      ✓ should update SE information
      ✓ should reject SG invalid fields
      ✓ should update SG information
      ✓ should reject US invalid fields
      ✓ should update US information

  /account/connect/edit-payment-information
    EditPaymentInformation#BEFORE
      ✓ should reject invalid stripeid
      ✓ should bind Stripe account to req
    EditPaymentInformation#GET
      ✓ should present the form
    EditPaymentInformation#POST
      ✓ should reject AT invalid fields
      ✓ should submit AT information
      ✓ should reject AU invalid fields
      ✓ should update AU information
      ✓ should reject BE invalid fields
      ✓ should update BE information
      ✓ should reject CA invalid fields
      ✓ should update CA information
      ✓ should reject CH invalid fields
      ✓ should update CH information
      ✓ should reject DE invalid fields
      ✓ should update DE information
      ✓ should reject DK invalid fields
      ✓ should update DK information
      ✓ should reject ES invalid fields
      ✓ should update ES information
      ✓ should reject FI invalid fields
      ✓ should update FI information
      ✓ should reject GB invalid fields (account number, sort code)
      ✓ should update GB information (account number, sort code)
      ✓ should reject GB invalid fields (iban)
      ✓ should update GB information (iban)
      ✓ should reject HK invalid fields
      ✓ should update HK information
      ✓ should reject IE invalid fields
      ✓ should update IE information
      ✓ should reject IT invalid fields
      ✓ should update IT information
      ✓ should reject JP invalid fields
      ✓ should update JP information
      ✓ should reject LU invalid fields
      ✓ should update LU information
      ✓ should reject NL invalid fields
      ✓ should update NL information
      ✓ should reject NO invalid fields
      ✓ should update NO information
      ✓ should reject NZ invalid fields
      ✓ should update NZ information
      ✓ should reject PT invalid fields
      ✓ should update PT information
      ✓ should reject SE invalid fields
      ✓ should update SE information
      ✓ should reject SG invalid fields
      ✓ should update SG information
      ✓ should reject US invalid fields
      ✓ should update US information

  /account/connect
    Index#BEFORE
      ✓ should bind Stripe accounts to req
    Index#GET
      ✓ should have row for each Stripe account

  /account/connect/stripe-account
    StripeAccount#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject other account's stripeid
      ✓ should bind Stripe account to req
    StripeAccount#GET
      ✓ should show registration unstarted
      ✓ should show registration completed
      ✓ should hide registration after submitting registration
      2) should hide company owners after submitting registration
      ✓ should show payment information required
      ✓ should show payment information created
      ✓ should show ready to submit
      3) should show registration is submitted

  /account/connect/stripe-accounts
    StripeAccounts#BEFORE
      ✓ should bind Stripe accounts to req
    StripeAccounts#GET
      ✓ should have row for each Stripe account

  /account/connect/submit-company-registration
    SubmitCompanyRegistration#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject individual registration
      ✓ should bind Stripe account to req
    SubmitCompanyRegistration#GET
      4) should present the form
    SubmitCompanyRegistration#POST
      ✓ should reject registration that hasn't submitted payment details
      5) should submit registration

  /account/connect/submit-individual-registration
    SubmitIndividualRegistration#BEFORE
      ✓ should reject invalid stripeid
      ✓ should reject company registration
      ✓ should bind Stripe account to req
    SubmitIndividualRegistration#GET
      6) should present the form
    SubmitIndividualRegistration#POST
      ✓ should reject registration that hasn't submitted payment details
      7) should submit registration

  /administrator/connect/delete-stripe-account
    DeleteStripeAccount#BEFORE
      ✓ should bind Stripe account to req
    DeleteStripeAccount#GET
      ✓ should present the form
      ✓ should present the Stripe account table
    DeleteStripeAccount#POST
      ✓ should delete Stripe account

  /administrator/connect
    Index#BEFORE
      ✓ should bind Stripe accounts to req
    Index#GET
      ✓ should have row for each Stripe account

  /administrator/connect/payout
    Payout#BEFORE
      ✓ should reject invalid payoutid
      8) should bind payout to req
    Payout#GET
      9) should have row for payout

  /administrator/connect/payouts
    Payouts#BEFORE
      10) should bind payouts to req
    Payouts#GET
